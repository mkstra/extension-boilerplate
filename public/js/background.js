var app=function(){"use strict";function t(){}function e(t){return t()}function r(){return Object.create(null)}function n(t){t.forEach(e)}function o(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let s;function c(t){s=t}const i=[],l=Promise.resolve();let h=!1;const p=[],f=[],u=[];function d(t){f.push(t)}function m(){const t=new Set;do{for(;i.length;){const t=i.shift();c(t),y(t.$$)}for(;p.length;)p.shift()();for(;f.length;){const e=f.pop();t.has(e)||(e(),t.add(e))}}while(i.length);for(;u.length;)u.pop()();h=!1}function y(t){t.fragment&&(t.update(t.dirty),n(t.before_render),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_render.forEach(d))}const g=new Set;function $(t,e){t.$$.dirty||(i.push(t),h||(h=!0,l.then(m)),t.$$.dirty=r()),t.$$.dirty[e]=!0}function w(a,i,l,h,p,f){const u=s;c(a);const y=i.props||{},w=a.$$={fragment:null,ctx:null,props:f,update:t,not_equal:p,bound:r(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(u?u.$$.context:[]),callbacks:r(),dirty:null};let v=!1;var b,x,P;w.ctx=l?l(a,y,(t,e)=>{w.ctx&&p(w.ctx[t],w.ctx[t]=e)&&(w.bound[t]&&w.bound[t](e),v&&$(a,t))}):y,w.update(),v=!0,n(w.before_render),w.fragment=h(w.ctx),i.target&&(i.hydrate?w.fragment.l((P=i.target,Array.from(P.childNodes))):w.fragment.c(),i.intro&&((b=a.$$.fragment)&&b.i&&(g.delete(b),b.i(x))),function(t,r,a){const{fragment:s,on_mount:c,on_destroy:i,after_render:l}=t.$$;s.m(r,a),d(()=>{const r=c.map(e).filter(o);i?i.push(...r):n(r),t.$$.on_mount=[]}),l.forEach(d)}(a,i.target,i.anchor),m()),c(u)}class v{$destroy(){var e,r;r=1,(e=this).$$.fragment&&(n(e.$$.on_destroy),r&&e.$$.fragment.d(1),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={}),this.$destroy=t}$on(t,e){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(e),()=>{const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}$set(){}}var b="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var x,P=new(function(t,e){!function(e,r){t.exports=function(t){var e=Array.prototype.slice,r=Object.prototype.hasOwnProperty;return n.default=n,n;function n(o){var a=(o=o||{}).chrome||t.chrome,s=o.Promise||t.Promise,c=a.runtime,i=this;if(!i)throw new Error("ChromePromise must be called with new keyword");function l(t,r){return function(){var n=e.call(arguments);return new s(function(o,a){n.push(function(){var t=c.lastError,r=e.call(arguments);if(t)a(t);else switch(r.length){case 0:o();break;case 1:o(r[0]);break;default:o(r)}}),t.apply(r,n)})}}function h(t,e){for(var o in t)if(r.call(t,o)){var a;try{a=t[o]}catch(t){continue}var s=typeof a;"object"!==s||a instanceof n?e[o]="function"===s?l(a,t):a:(e[o]={},h(a,e[o]))}}h(a,i),a.permissions&&a.permissions.onAdded.addListener(function(t){if(t.permissions&&t.permissions.length){var e={};t.permissions.forEach(function(t){var r=/^[^.]+/.exec(t);r in a&&(e[r]=a[r])}),h(e,i)}})}}(this||e)}("undefined"!=typeof self?self:b)}(x={exports:{}},x.exports),x.exports);P.default=P;var _=P;const E=(t,e)=>e.some(e=>e instanceof RegExp?e.test(t):e===t);var S=(t,e)=>{if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return((t,{stripHash:e})=>{const r=/^data:(?<type>.*?),(?<data>.*?)(?:#(?<hash>.*))?$/.exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:n,data:o,hash:a}=r.groups;const s=n.split(";");a=e?"":a;let c=!1;"base64"===s[s.length-1]&&(s.pop(),c=!0);const i=(s.shift()||"").toLowerCase(),l=[...s.map(t=>{let[e,r=""]=t.split("=").map(t=>t.trim());return"charset"===e&&"us-ascii"===(r=r.toLowerCase())?"":`${e}${r?`=${r}`:""}`}).filter(Boolean)];return c&&l.push("base64"),(0!==l.length||i&&"text/plain"!==i)&&l.unshift(i),`data:${l.join(";")},${c?o.trim():o}${a?`#${a}`:""}`})(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");const r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));const n=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&"https:"===n.protocol&&(n.protocol="http:"),e.forceHttps&&"http:"===n.protocol&&(n.protocol="https:"),e.stripAuthentication&&(n.username="",n.password=""),e.stripHash&&(n.hash=""),n.pathname&&(n.pathname=n.pathname.replace(/(?<!\b(?:[a-z][a-z\d+\-.]{1,50}:))\/{2,}/g,"/")),n.pathname)try{n.pathname=decodeURI(n.pathname)}catch(t){}if(!0===e.removeDirectoryIndex&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let t=n.pathname.split("/");const r=t[t.length-1];E(r,e.removeDirectoryIndex)&&(t=t.slice(0,t.length-1),n.pathname=t.slice(1).join("/")+"/")}if(n.hostname&&(n.hostname=n.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)(?:[a-z\-\d]{1,63})\.(?:[a-z.\-\d]{2,63})$/.test(n.hostname)&&(n.hostname=n.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(const t of[...n.searchParams.keys()])E(t,e.removeQueryParameters)&&n.searchParams.delete(t);e.sortQueryParameters&&n.searchParams.sort(),e.removeTrailingSlash&&(n.pathname=n.pathname.replace(/\/$/,""));const o=t;return t=n.toString(),e.removeSingleSlash||"/"!==n.pathname||o.endsWith("/")||""!==n.hash||(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||"/"===n.pathname)&&""===n.hash&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t};const H=(t,e,r=Date.now())=>({dateCreated:r,title:e||"",url:t}),k=async()=>fetch("https://raw.githubusercontent.com/mkstra/browserhistory/main/params.json").then(t=>t.json()).then(({blacklist:t})=>_.storage.sync.set({blacklist:t}));function A(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function I(t){k(),chrome.runtime.onMessage.addListener(function({action:t,title:r,url:n},o,a){return"toggle:content"==t&&e(n,r).then(()=>{a({action:"added content"})}).catch(t=>console.log("error in update",t)),!0});const e=async(t,e)=>{t=S(t,{stripHash:!0});let r=await _.storage.sync.get(t);const n=H(t,e);console.log(n,"node here");try{r[t]?await _.storage.sync.remove(t):await _.storage.sync.set({[t]:n})}catch(e){console.log(e,`error in ${r[t]?"REMOVE":"SETTING"}`)}return!0};return{}}return new class extends v{constructor(t){super(),w(this,t,I,A,a,[])}}({target:document.body})}();
